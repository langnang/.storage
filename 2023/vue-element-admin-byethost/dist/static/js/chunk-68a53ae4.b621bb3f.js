(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68a53ae4"],{"054d":function(e,t,n){"use strict";n.r(t);var a=n("0768"),i=n("bcba"),l=n.n(i),o=l.a.cloneDeep(a["$original_meta"]),r=l.a.cloneDeep(a["$original_content"]),s=l.a.cloneDeep(a["$original_comment"]),c=l.a.cloneDeep(a["$original_field"]),u=l.a.cloneDeep(a["$original_link"]);t["default"]={label:"图标",value:"icon",description:"",visible:!0,disabled:!1,original_meta:o,original_content:r,original_comment:s,original_field:c,original_link:u}},"0640":function(e,t,n){"use strict";n.r(t);var a=n("0768"),i=n("bcba"),l=n.n(i),o=l.a.cloneDeep(a["$original_meta"]),r=l.a.cloneDeep(a["$original_content"]),s=l.a.cloneDeep(a["$original_comment"]),c=l.a.cloneDeep(a["$original_field"]),u=l.a.cloneDeep(a["$original_link"]);t["default"]={label:"资讯",value:"news",description:"",visible:!0,disabled:!1,original_meta:o,original_content:r,original_comment:s,original_field:c,original_link:u}},"0768":function(e,t,n){"use strict";n.r(t),n.d(t,"types",(function(){return r})),n.d(t,"type_filter",(function(){return s})),n.d(t,"statuses",(function(){return c})),n.d(t,"status_filter",(function(){return u})),n.d(t,"map",(function(){return d})),n.d(t,"$original_meta",(function(){return p})),n.d(t,"$original_content",(function(){return f})),n.d(t,"$original_comment",(function(){return m})),n.d(t,"$original_link",(function(){return g})),n.d(t,"$original_field",(function(){return h}));var a=n("ffce"),i=(n("a6a9"),n("90c8"),n("4cc3"),n("e224"),n("3dd5"),n("d987"),n("6de1"),n("12a1")),l=n.n(i),o=l.a.Random,r=[{value:"category",label:"分类",visible:!0,type:"meta",group:["article","icon","webstack","question"]},{value:"tag",label:"标签",visible:!0,type:"meta",group:["article","icon","webstack","question"]},{value:"post",label:"正文",visible:!0,type:"content",group:["article","icon","webstack","spider"]},{value:"page",label:"页面",visible:!0,type:"content",group:["article","icon","webstack","spider"]},{value:"template",label:"模板",visible:!0,type:"content",group:["article","icon","webstack","spider"]},{value:"radio",label:"单选题",visible:!0,type:"content",group:["question"]},{value:"checkbox",label:"多选题",visible:!0,type:"content",group:["question"]},{value:"switch",label:"判断题",visible:!0,type:"content",group:["question"]},{value:"input",label:"填空题",visible:!0,type:"content",group:["question"]},{value:"markdown",label:"概述题",visible:!0,type:"content",group:["question"]},{value:"code",label:"编程题",visible:!0,type:"content",group:["question"]}],s=function(e){var t=e.row,n=e.$index,a=e.$target,i=e.$this,l=(e.$parent,i.options(a).find((function(e){return e.value===t[i.key||n]})));return l?l.label:t[i.key||n]},c=[{value:"publish",label:"公开",visible:!0},{value:"private",label:"私密",visible:!0},{value:"draft",label:"草稿",visible:!0}],u=function(e){var t=e.row,n=e.$index,a=e.$target,i=e.$this,l=(e.$parent,e.$value),o=i.options(a).find((function(e){return e.value===(l||t[i.key||n])}));return o?o.label:t[i.key||n]},d=Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},{mid:{label:"编号",table:{width:"80px"}},cid:{label:"编号",table:{width:"80px"}},coid:{label:"编号",table:{width:"80px"}},lid:{label:"编号",table:{width:"80px"}},name:{label:"名称",table:{header:{type:"input"}},form:{col:16,type:"input"},mock:function(){return o.title()},rule:[]},title:{label:"标题",table:{align:"left",header:{type:"input"},html:function(e){var t=e.scope;return'<span class="el-tag el-tag--mini el-tag--light">'.concat(t.row.status,"</span>")+t.row.title+123}},form:{col:16,type:"input"},mock:function(){return o.title()},rule:[]},slug:{label:"标识",table:{width:"100px"},form:{col:8,type:"input"},mock:function(){return o.guid()}},ico:{label:"徽标",table:{width:"60px",component:"ico"},form:{type:"input"},mock:function(){return o.image("100x100")}},url:{label:"地址",table:{width:"200px"},form:{type:"input"},mock:function(){return o.url()}},description:{label:"说明",table:{},form:{type:"textarea"},mock:function(){return o.paragraph(10)}},text:{label:"正文",table:{},form:{type:"markdown"},mock:function(){return o.paragraph(10)}},type:{label:"类型",options:function(e){return r},table:{width:"100px",header:{type:"select"}},form:{type:"select"},filter:s,mock:function(e){var t=e.$this,n=e.$index;return l.a.mock({"array|1":t.options(n).map((function(e){return e.value}))})["array"]}},status:{label:"状态",options:function(e){return c},table:{width:"100px",header:{type:"select"}},form:{type:"select"},filter:u,mock:function(e){var t=e.$this,n=e.$index;return l.a.mock({"array|1":t.options(n).map((function(e){return e.value}))})["array"]}},parent:{label:"父本编号"},count:{label:"计数"},order:{label:"排序"}}),{}),{}),{},{commentsNum:{label:"评论数"},password:{label:"密码",description:"私有状态访问密码"},allowComment:{label:"允许评论"},allowPing:{},allowFeed:{label:"允许评论"},template:{label:"模板编号"},user:{label:"作者"},support:{},views:{}},{suggestion:{label:"答案",form:{type:"textarea"},filter:function(e){var t=e.row,n=e.$index;e.$target,e.$this,e.$parent;return"radio"===t.type?t[n].split(",").map((function(e){return t.options[e]})).join("\r\n"):t[n]},mock:function(){return o.paragraph(10)}},options:{label:"选项"}}),{domains:{label:"域名",options:function(){return[]},form:{type:"select",attrs:{multiple:!0,filterable:!0,"allow-create":!0},events:{}}},scan_urls:{label:"入口",description:"入口链接",options:function(){return[]},form:{type:"select",attrs:{multiple:!0,filterable:!0,"allow-create":!0},events:{}}},list_url_regexes:{label:"列表页",description:"列表页url的规则",options:function(){return[]},form:{type:"select",attrs:{multiple:!0,filterable:!0,"allow-create":!0},events:{}}},content_url_regexes:{label:"内容页",description:"内容页url的规则",options:function(){return[]},form:{type:"select",attrs:{multiple:!0,filterable:!0,"allow-create":!0},events:{}}},export_table:{label:"表名",description:"爬虫爬取数据导出: "},fields:{label:"抽取规则",description:"定义内容页的抽取规则",form:{component:"SpiderFormTable",events:{input:function(e){console.log("🚀 ~ file: _original.js:303 ~ value:",e)}}}},expand:{label:"拓展规则",description:"定义拓展的抽取规则",form:{component:"SpiderFormTabs",events:{input:function(e){console.log("🚀 ~ file: _original.js:303 ~ value:",e)}}}}}),{},{reprint:{label:"转载",children:{url:"地址",title:"标题"}},relationships:{label:"关联"},created_at:{label:"创建时间",table:{width:"133px"}},updated_at:{label:"修改时间",table:{width:"133px"}},release_at:{label:"发布时间",table:{width:"133px"}},deleted_at:{label:"删除时间",table:{width:"133px"}}}),p=Object(a["a"])(Object(a["a"])({$tableColumns:["mid","name","slug","type","status","created_at","updated_at","release_at"],$formItems:["name","slug","type"]},d),{},{type:Object(a["a"])(Object(a["a"])({},d.type),{},{options:function(e){return r.filter((function(t){return"meta"===t.type&&t.group.includes(e)}))}})}),f=Object(a["a"])(Object(a["a"])({$tableColumns:["cid","title","slug","type","status","created_at","updated_at","release_at"],$formItems:["title","slug","text","type"]},d),{},{type:Object(a["a"])(Object(a["a"])({},d.type),{},{options:function(e){return r.filter((function(t){return"content"===t.type&&t.group.includes(e)}))}})}),m=Object(a["a"])({$tableColumns:[],$formItems:[]},d),g=Object(a["a"])({$tableColumns:[],$formItems:[]},d),h=Object(a["a"])({$tableColumns:[],$formItems:[]},d)},"3a38":function(e,t,n){},"4f5a1":function(e,t,n){"use strict";n.r(t);var a=n("0768"),i=n("bcba"),l=n.n(i),o=l.a.cloneDeep(a["$original_meta"]),r=l.a.cloneDeep(a["$original_content"]),s=l.a.cloneDeep(a["$original_comment"]),c=l.a.cloneDeep(a["$original_field"]),u=l.a.cloneDeep(a["$original_link"]);t["default"]={label:"文章",value:"article",description:"",visible:!0,disabled:!1,original_meta:o,original_content:r,original_comment:s,original_field:c,original_link:u}},5461:function(e,t,n){"use strict";n.r(t);var a=n("0768"),i=n("bcba"),l=n.n(i),o=l.a.cloneDeep(a["$original_meta"]),r=l.a.cloneDeep(a["$original_content"]),s=l.a.cloneDeep(a["$original_comment"]),c=l.a.cloneDeep(a["$original_field"]),u=l.a.cloneDeep(a["$original_link"]);t["default"]={label:"语录",value:"quote",description:"",visible:!1,disabled:!0,original_meta:o,original_content:r,original_comment:s,original_field:c,original_link:u}},"57f6":function(e,t,n){},"636c":function(e,t,n){"use strict";n("57f6")},7656:function(e,t,n){},8049:function(e,t,n){"use strict";n("a40c")},"85d5":function(e,t,n){"use strict";n.r(t);var a=n("0768"),i=n("bcba"),l=n.n(i),o=l.a.cloneDeep(a["$original_meta"]),r=l.a.cloneDeep(a["$original_content"]),s=l.a.cloneDeep(a["$original_comment"]),c=l.a.cloneDeep(a["$original_field"]),u=l.a.cloneDeep(a["$original_link"]);t["default"]={label:"试题",value:"question",description:"",visible:!0,disabled:!1,original_meta:o,original_content:r,original_comment:s,original_field:c,original_link:u}},"89fa":function(e,t,n){"use strict";n.r(t);n("485c");var a=n("0768"),i=n("bcba"),l=n.n(i),o=l.a.cloneDeep(a["$original_meta"]),r=l.a.cloneDeep(a["$original_content"]);r.$tableColumns.splice(4,0,"url"),r.$formItems.splice(4,1),r.$formItems.splice(3,0,"url");var s=l.a.cloneDeep(a["$original_comment"]),c=l.a.cloneDeep(a["$original_field"]),u=l.a.cloneDeep(a["$original_link"]);t["default"]={label:"导航",value:"webstack",description:"",visible:!0,disabled:!1,original_meta:o,original_content:r,original_comment:s,original_field:c,original_link:u}},9389:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n(e.active,{tag:"component",attrs:{query:e.query,history:e.history,target:e.target},on:{toggle:e.toggle,"toggle-dialog":e.toggleDialog,change:e.change}}),n("UploadDialog",{ref:"upload",attrs:{query:e.query,history:e.history,target:e.target}})],1)},i=[],l=(n("7019"),n("a6a9"),n("90c8"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container content content-table"},[n("el-card",{attrs:{"data-role":"header"}},[n("span",{staticClass:"el-card-header__form"},[n("MetaInlineForm",{ref:"meta-form",attrs:{target:e.target,query:e.query},on:{change:e.handleMetaFormChange,create:e.handleCreateMeta,update:e.handleUpdateMeta,delete:e.handleDeleteMeta,setting:e.handleSettingMeta}})],1),n("span",{staticClass:"el-card-header__operate"},[n("el-tooltip",{attrs:{effect:"dark",content:"查询",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"default",icon:"el-icon-search"},on:{click:e.handleSelect}})],1),n("el-tooltip",{attrs:{effect:"dark",content:"重置",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"info",icon:"el-icon-refresh-left"},on:{click:e.handleReset}})],1),n("el-tooltip",{attrs:{effect:"dark",content:"关联",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"warning",icon:"el-icon-connection"},on:{click:e.handleRelationship}})],1),n("el-tooltip",{attrs:{effect:"dark",content:"新增",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreateContent}})],1),n("el-tooltip",{attrs:{effect:"dark",content:"更新",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"warning",icon:"el-icon-edit"},on:{click:e.handleUpdateContent}})],1),n("el-tooltip",{attrs:{effect:"dark",content:"发布",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"success"},on:{click:e.handleReleaseContent}},[n("svg-icon",{attrs:{"icon-class":"guide"}})],1)],1),n("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"danger",icon:"el-icon-delete"},on:{click:e.handleDeleteContent}})],1),n("el-tooltip",{attrs:{effect:"dark",content:"上传",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"primary"},on:{click:function(t){return e.handleUpload({visible:!0})}}},[n("font-awesome-icon",{attrs:{icon:["fas","upload"]}})],1)],1),n("el-tooltip",{attrs:{effect:"dark",content:"下载",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"primary",disabled:""},on:{click:function(t){return e.handleExport({visible:!0})}}},[n("font-awesome-icon",{attrs:{icon:["fas","download"]}})],1)],1),n("el-tooltip",{attrs:{effect:"dark",content:"返回",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"info"},on:{click:function(t){return e.$emit("toggle",{to:"option-list"})}}},[n("font-awesome-icon",{attrs:{icon:["fas","hand-point-left"]}})],1)],1)],1)]),n("ContentTable",{ref:"table",attrs:{target:e.target,query:e.query,"request-params":e.requestParams}}),n("el-dialog",{attrs:{title:"上传",visible:e.upload_dialog.visible,"before-close":e.handleCloseDialog},on:{"update:visible":function(t){return e.$set(e.upload_dialog,"visible",t)}}},[n("el-upload",{ref:"upload",attrs:{drag:"",action:e.upload_dialog.url,data:e.upload_dialog.data,accept:".xlsx,.xls,.csv,.ods,.slk,.xml,.html,.mpdf,dompdf,.tcpdf,.json,.md",multiple:"","on-success":e.onUploadSuccess}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[e._v(" 将 "),n("em",[e._v("模板格式")]),e._v(" 文件拖到此处，或"),n("em",[e._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传 "),n("em",[e._v("excel/json")]),e._v(" 文件 ")])]),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button-group",{staticStyle:{float:"left"}},[n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.handleExport({$filetype:"excel"})}}},[e._v("EXCEL 模板下载")]),n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.handleExport({$filetype:"json"})}}},[e._v("JSON 模板下载")])],1),n("el-button",{on:{click:e.handleCloseDialog}},[e._v("取 消")])],1)],1),n("el-dialog",{attrs:{title:"下载",visible:e.export_dialog.visible,"before-close":e.handleCloseDialog},on:{"update:visible":function(t){return e.$set(e.export_dialog,"visible",t)}}},[n("div",{staticClass:"text-center"},[n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.handleExport({$filetype:"xlsx"})}}},[e._v("EXCEL 格式下载")]),n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.handleExport({$filetype:"json"})}}},[e._v("JSON 格式下载")])],1),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleCloseDialog}},[e._v("取 消")])],1)])],1)}),o=[],r=n("ffce"),s=(n("4cc3"),n("d48e")),c=n("1761"),u=n("a417"),d={name:"ContentTableView",components:{MetaInlineForm:s["default"],ContentTable:c["default"]},props:{target:{type:String,default:""},query:{type:Object,default:function(){return{}}},history:{type:Array,default:function(){return[]}}},data:function(){return{requests:u,requestParams:{},loading:!1,table:{data:[],current_page:1,total:0,page_size:15,selection:[]},showColumns:[],formInline:{user:"",region:""},checked:"",value:"",options:[],export_dialog:{visible:!1,url:"",data:{}},upload_dialog:{visible:!1,url:"",data:{}}}},mounted:function(){this.handleSelect(),console.log(this.query),this.upload_dialog.url="/api/"+(this.target?this.target+"/":"")+"import_content"},methods:{handleMetaFormChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];console.log("🚀 ~ file: ContentTableView.vue:126 ~ handleMetaFormChange ~ mids:",e),this.requestParams={mids:e},this.upload_dialog.data.mids=e},handleSelect:function(){this.$refs.table.table.current_page=1,this.requestParams.mids=this.$refs["meta-form"].getValue(),this.$refs.table.getTableData()},handleReset:function(){},handleRelationship:function(){console.log("🚀 ~ file: ContentTableView.vue:152 ~ handleRelationship ~ handleRelationship:",{mids:this.requestParams.mids,selection:this.table.selection}),0===this.requestParams.mids.length&&this.table.selection&&this.$message({type:"warning",dangerouslyUseHTMLString:!0,message:"请选择需要关联的数据,<br/>同时选中Meta或Content将相互关联,<br/>单独选中可关联其它分支"})},handleCreateMeta:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("🚀 ~ file: ContentTableView.vue:82 ~ handleCreateMeta ~ query:",e),this.$emit("toggle",{to:"meta-form",query:e})},handleCreateContent:function(){this.$emit("toggle",{to:"content-form",query:Object(r["a"])({},this.requestParams)})},handleDeleteMeta:function(e){var t=this,n=e.row,a=e.$index;console.log("🚀 ~ file: ContentTableView.vue:89 ~ hanldeDeleteMeta:",{row:n,$index:a}),this.$confirm("此操作将永久删除所选数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.requests.delete_meta_list(t.target,{mids:[n.mid]}).then((function(e){t.$message.success("删除成功!"),t.$refs["meta-form"].meta[a].value="",t.$refs["meta-form"].getMetaCategoryList(a)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleDeleteContent:function(){var e=this;if(0===this.$refs.table.table.selection)return this.$message.warning("请选择删除的数据");this.$confirm("此操作将永久删除所选数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.$refs.table.table.selection.map((function(e){return e.cid}));e.requests.delete_content_list(e.target,{cids:t}).then((function(t){e.$message.success("删除成功!"),e.handleSelect()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleUpdateMeta:function(e){var t=e.row;e.$index;this.$emit("toggle",{to:"meta-form",query:t})},handleUpdateContent:function(){var e=this.$refs.table.table.selection;if(0===e.length)return this.$message.warning("请选择需要修改的数据, 多选可批量修改指定字段");var t=1===e.length?e[0]:{$data:e};this.$emit("toggle",{to:"content-form",query:Object(r["a"])(Object(r["a"])({},this.requestParams),t)})},handleReleaseContent:function(){var e=this;if(0===this.$refs.table.table.selection)return this.$message.warning("请选择删除的数据");this.$confirm("此操作将发布所选数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.$refs.table.table.selection.map((function(e){return e.cid}));e.requests.release_content_list(e.target,{cids:t}).then((function(t){e.$message.success("发布成功!"),e.handleSelect()}))})).catch((function(){e.$message({type:"info",message:"已取消发布"})}))},handleUpload:function(e){e.visible,e.$filetype;this.$emit("toggle-dialog",{ref:"upload"})},handleExport:function(e){var t=e.visible,n=e.$filetype;t&&(this.export_dialog.visible=!0),n&&this.requests.export_tree(this.target,{$filetype:n})},handleCloseDialog:function(){this.upload_dialog.visible=!1,this.export_dialog.visible=!1,this.$refs.upload.clearFiles(),this.handleSelect()},onUploadSuccess:function(e,t,n){this.$message.success("上传成功!")},handleSettingMeta:function(){this.$emit("toggle",{to:"meta-tree"})}}},p=d,f=(n("636c"),n("8e08")),m=Object(f["a"])(p,l,o,!1,null,"1ef5034c",null),g=m.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container content content-form"},[n("el-card",{attrs:{"data-role":"header"}},[n("span",{staticClass:"el-card-header__title"},[e._v(" "+e._s(e.query.cid?"Update":"Create")+" "+e._s(e.$route.name)+" Content "),n("el-tag",{attrs:{size:"small",type:"info"}},[e._v(" "+e._s(e.status)+" ")])],1),n("span",{staticClass:"el-card-header__operate"},[n("el-button",{attrs:{size:"mini",type:"info"},on:{click:e.handleCancel}},[e._v(" 返回 ")])],1)]),n("ContentForm",{directives:[{name:"loading",rawName:"v-loading",value:e.form.loading,expression:"form.loading"}],attrs:{query:e.query,data:e.form.data,target:e.target},on:{submit:e.handleSubmit,cancel:e.handleCancel,staging:e.handleStaging}})],1)},b=[],v=(n("3dd5"),n("9896")),_={name:"ContentFormView",components:{ContentForm:v["default"]},props:{target:{type:String,default:""},query:{type:Object,default:function(){return{}}},history:{type:Array,default:function(){return[]}}},data:function(){var e=this.query.$active.original_content.status.filter({row:this.query,$index:"status",$this:this.query.$active.original_content.status,$parent:this.query.$active.original_content});return{loading:!1,requests:u,status:e,form:{loading:!1,data:{}}}},created:function(){this.handleSelect()},methods:{handleSelect:function(){var e=this;this.query.data&&this.query.data.cid&&(this.form.loading=!0,this.requests.select_content_item(this.target,{cid:this.query.data.cid}).then((function(t){var n=t.data;e.form.data=n})).finally((function(){e.form.loading=!1})))},handleSubmit:function(e){var t=this;e=Object(r["a"])({},e),e.cid?this.requests.release_content_item(this.target,e).then((function(e){t.$message.success("修改成功"),t.handleCancel()})):this.requests.insert_content_item(this.target,e).then((function(e){t.$message.success("新增成功"),t.handleCancel()}))},handleCancel:function(){this.$emit("toggle",{to:-1})},handleStaging:function(e){var t=this;console.log("🚀 ~ file: ContentFormView.vue:84 ~ handleStaging ~ data:",e),this.requests.staging_content_item(this.target,e).then((function(e){t.$message.success("暂存成功")}))}}},y=_,$=Object(f["a"])(y,h,b,!1,null,null,null),k=$.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"app-container meta meta-tree"},[n("el-card",{attrs:{"data-role":"header"}},[n("span",{staticClass:"el-card-header__title"},[e._v(" MetaTreeView ")]),n("span",{staticClass:"el-card-header__operate"},[n("el-tooltip",{attrs:{effect:"dark",content:"查询",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"default",icon:"el-icon-search"},on:{click:e.handleSelect}})],1),n("el-tooltip",{attrs:{effect:"dark",content:"新增",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreateMeta}})],1),n("el-tooltip",{attrs:{effect:"dark",content:"更新",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"warning",icon:"el-icon-edit"},on:{click:e.handleUpdateMeta}})],1),n("el-tooltip",{attrs:{effect:"dark",content:"发布",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"success"},on:{click:e.handleReleaseMeta}},[n("svg-icon",{attrs:{"icon-class":"guide"}})],1)],1),n("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"danger",icon:"el-icon-delete"},on:{click:e.handleDeleteMeta}})],1),n("el-tooltip",{attrs:{effect:"dark",content:"上传",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"primary"}},[n("font-awesome-icon",{attrs:{icon:["fas","upload"]}})],1)],1),n("el-tooltip",{attrs:{effect:"dark",content:"下载",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"primary",disabled:""}},[n("font-awesome-icon",{attrs:{icon:["fas","download"]}})],1)],1),n("el-tooltip",{attrs:{effect:"dark",content:"帮助",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"success",icon:"el-icon-info"},on:{click:e.handleHelp}})],1),n("el-tooltip",{attrs:{effect:"dark",content:"返回",placement:"bottom"}},[n("el-button",{attrs:{size:"mini",circle:"",type:"info"},on:{click:function(t){return e.$emit("toggle",{to:"content-table"})}}},[n("font-awesome-icon",{attrs:{icon:["fas","hand-point-left"]}})],1)],1)],1)]),n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{gutter:20}},[n("el-col",{attrs:{span:18}},[n("MetaTree",{attrs:{role:"main",data:e.tree.data}})],1),n("el-col",{attrs:{span:6}},[n("MetaTree",{attrs:{role:"main",data:e.table.data,attrs:{draggable:!1}}})],1)],1)],1)},x=[],C=(n("3363"),n("3399"),n("4efa")),q={name:"MetaTreeView",components:{MetaTree:C["default"]},props:{target:{type:String,default:""},query:{type:Object,default:function(){return{}}},history:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,requests:u,tree:{loading:!1,data:[],selection:[]},table:{loading:!1,data:[],selection:[],checkAll:!1,isIndeterminate:!1,inputVisible:!1,inputValue:""},form:{data:{tag:""}}}},created:function(){this.handleSelect()},methods:{handleCheckAllChange:function(e){this.table.selection=e?this.table.data:[],this.table.isIndeterminate=!1},handleCheckedCitiesChange:function(e){var t=e.length;this.table.checkAll=t===this.table.data.length,this.table.isIndeterminate=t>0&&t<this.table.data.length},handleSelect:function(){var e=this;this.loading=!0,Promise.all([this.requests.select_meta_tree(this.target,{type:"category",parent:0}),this.requests.select_meta_list(this.target,{type:"tag",page_size:100})]).then((function(t){console.log("🚀 ~ file: MetaTreeView.vue:84 ~ handleSelect ~ res:",t),e.tree.data=t[0].data,e.table.data=[{mid:0,name:"全选",children:t[1].data.data}]})).finally((function(){e.loading=!1}))},handleSelectCategory:function(){},handleSelectTag:function(){},handleClose:function(e){},showInput:function(){var e=this;this.table.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){this.table.inputValue;this.table.inputVisible=!1,this.table.inputValue=""},handleCreateMeta:function(){this.$emit("toggle",{to:"meta-form",query:{}})},handleUpdateMeta:function(){},handleReleaseMeta:function(){},handleDeleteMeta:function(){},handleHelp:function(){this.$alert("这是一段内容","信息",{})}}},j=q,D=(n("8049"),Object(f["a"])(j,w,x,!1,null,"368b1c97",null)),O=D.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container meta meta-form"},[n("el-card",{attrs:{"data-role":"header"}},[n("span",{staticClass:"el-card-header__title"},[e._v(" "+e._s(e.query.mid?"Update":"Create")+" "+e._s(e.$route.name)+" Meta ")]),n("span",{staticClass:"el-card-header__operate"},[n("el-button",{attrs:{size:"mini",type:"info"},on:{click:e.handleCancel}},[e._v(" 返回 ")])],1)]),n("MetaForm",{attrs:{data:e.query,target:e.target},on:{submit:e.handleSubmit,cancel:e.handleCancel}})],1)},M=[],T=n("d8ba"),z={name:"MetaFormView",components:{MetaForm:T["default"]},props:{target:{type:String,default:""},query:{type:Object,default:function(){return{}}},history:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,requests:u}},methods:{handleSubmit:function(e){var t=this;e=Object(r["a"])({},e),e.mid?this.requests.release_meta_item(this.target,e).then((function(e){t.$message.success("发布成功"),t.handleCancel()})):this.requests.insert_meta_item(this.target,e).then((function(e){t.$message.success("新增成功"),t.handleCancel()}))},handleCancel:function(){this.$emit("toggle",{to:-1})}}},E=z,V=Object(f["a"])(E,S,M,!1,null,null,null),I=V.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.category.loading,expression:"category.loading"}],staticClass:"app-container webstack webstack-home"},[n("el-row",{attrs:{gutter:20}},e._l(e.query.$options,(function(t){return n("el-col",{key:t.value,attrs:{span:6}},[n("el-card",{directives:[{name:"contextmenu",rawName:"v-contextmenu:contextmenu",arg:"contextmenu"}],style:{"background-color":t.backgroundColor,"text-align":"center"},attrs:{shadow:"hover",disabled:t.disabled},nativeOn:{click:function(n){return e.handleClick(t)}}},[n("h2",[e._v(" "+e._s(t.label))])])],1)})),1),n("v-contextmenu",{ref:"contextmenu"},[n("v-contextmenu-item",{on:{click:e.handleInsertBranch}},[e._v("新建")]),n("v-contextmenu-item",{on:{click:e.handleDeleteBranch}},[e._v("删除")]),n("v-contextmenu-item",{on:{click:e.handleUpdateBranch}},[e._v("修改")]),n("v-contextmenu-item",{on:{click:e.handleSelectBranch}},[e._v("详情")])],1)],1)},F=[],B={name:"OptionList",components:{},props:{query:{type:Object,default:function(){return{}}},history:{type:Array,default:function(){return[]}}},data:function(){return{category:{loading:!1}}},methods:{handleInsertBranch:function(){},handleDeleteBranch:function(){},handleUpdateBranch:function(){},handleSelectBranch:function(){},handleClick:function(e){this.$emit("change",{key:"target",value:e.value}),console.log("🚀 ~ file: option_list.vue:59 ~ handleClick ~ row:",e),this.$emit("toggle",{to:"content-table",query:e})}}},N=B,R=(n("e1ec"),Object(f["a"])(N,U,F,!1,null,"44c5ccb9",null)),A=R.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"上传",visible:e.dialog.visible,"before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[n("el-upload",{ref:"upload",attrs:{drag:"",action:e.dialog.action,data:e.dialog.data,accept:".xlsx,.xls,.csv,.ods,.slk,.xml,.html,.mpdf,dompdf,.tcpdf,.json,.md",multiple:"","on-success":e.onUploadSuccess}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[e._v(" 将 "),n("em",[e._v("模板格式")]),e._v(" 文件拖到此处，或"),n("em",[e._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传 "),n("em",[e._v("excel/json")]),e._v(" 文件 ")])]),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button-group",{staticStyle:{float:"left"}},[n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.handleExport({$filetype:"excel"})}}},[e._v("EXCEL 模板下载")]),n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.handleExport({$filetype:"json"})}}},[e._v("JSON 模板下载")])],1),n("el-button",{on:{click:e.handleClose}},[e._v("取 消")])],1)],1)},L=[],J=(n("e168"),{props:{target:{type:String,default:""},query:{type:Object,default:function(){return{}}},history:{type:Array,default:function(){return[]}}},data:function(){return{requests:u,dialog:{visible:!1,action:"",data:{}}}},methods:{toggle:function(){this.dialog.action="/api/".concat(this.target,"/import_").concat(this.query.$to.split("-")[0]),console.log("🚀 ~ file: upload_dialog.vue:48 ~ toggle ~ toggle:",{target:this.target,query:this.query,dialog:this.dialog}),this.dialog.visible=!this.dialog.visible},handleClose:function(){this.dialog.visible=!this.dialog.visible,this.$refs.upload.clearFiles()},handleExport:function(){},onUploadSuccess:function(){this.$message.success("上传成功!")}}}),H=J,X=Object(f["a"])(H,P,L,!1,null,null,null),G=X.exports,K=n("12a1"),Q=n("0768"),W=n("f7cd"),Y=function(e){return e.keys().filter((function(e){return 2!==e.indexOf("_")})).map(e).map((function(e){return e?e.default:{}}))},Z=[{label:"基础",value:"base",description:""},{label:"批次",value:"batch",description:"批处理"},{label:"相册",value:"album",description:""},{label:"音频",value:"audio",description:""},{label:"拓展",value:"awesome",description:""},{label:"书册",value:"book",description:""},{label:"日历",value:"calender",description:""},{label:"备忘",value:"cheatsheet",description:""},{label:"云盘",value:"cloud",description:""},{label:"集合",value:"collection",description:""},{label:"部署",value:"deploy",description:""},{label:"依赖",value:"dependency",description:""},{label:"词典",value:"dictionary",description:""},{label:"特效",value:"effect",description:""},{label:"论坛",value:"forum",description:""},{label:"游戏",value:"game",description:""},{label:"图表",value:"graph",description:""},{label:"图片",value:"image",description:""},{label:"名词",value:"noun",description:""},{label:"小说",value:"novel",description:""},{label:"接口",value:"openapi",description:""},{label:"封装",value:"package",description:""},{label:"诗词",value:"poetry",description:""},{label:"资产",value:"property",description:"财产、道具"},{label:"食谱",value:"recipe",description:""},{label:"规则",value:"rule",description:""},{label:"商城",value:"shop",description:""},{label:"片段",value:"snippet",description:""},{label:"应用",value:"software",description:""},{label:"代办",value:"todo",description:""},{label:"工具",value:"toolkit",description:""},{label:"视频",value:"video",description:""},{label:"远程",value:"webshell",description:""},{label:"百科",value:"wiki",description:""}],ee=Y(W).concat(Z.map((function(e){return Object(r["a"])(Object(r["a"])({},e),{},{disabled:!0,visible:!0})}))).filter((function(e){return e.visible})).map((function(e){return Object(r["a"])(Object(r["a"])({},e),{},{backgroundColor:K["Random"].color(),dataImage:K["Random"].dataImage("300x100",e.label)})})),te={options:ee,map:Q["map"],types:Q["types"],statuses:Q["statuses"]},ne={components:{ContentTableView:g,ContentFormView:k,MetaTreeView:O,MetaFormView:I,OptionList:A,UploadDialog:G},data:function(){return{target:null,target_option:null,active:null,query:null,history:[]}},created:function(){this.target=this.$route.meta.slug,this.target?this.toggle({to:"content-table"}):this.toggle({to:"option-list"})},methods:{toggle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{to:"branch"},t=e.to,n=e.query;-1===t&&(t=this.history[this.history.length-2]["to"],n=this.history[this.history.length-2]["query"],this.history=this.history.slice(0,-2)),"content-table"===t&&(this.active=g),"content-form"===t&&(this.active=k),"meta-tree"===t&&(this.active=O),"meta-form"===t&&(this.active=I),"option-list"===t&&(this.active=A),this.query={$to:t,$options:te.options,$target:this.target,$active:this.target_option,data:n},console.log("🚀 ~ file: index.vue:59 ~ this.query:",this.query),this.history.push({to:t,query:n})},change:function(e){var t=this,n=e.key,a=e.value;this.$data[n]=a,"target"===n&&(this.target_option=te.options.find((function(e){return e.value===t.target})))},toggleDialog:function(e){var t=e.ref;console.log("🚀 ~ file: index.vue:72 ~ toggleDialog ~ { ref }:",{ref:t}),this.$refs[t].toggle()}}},ae=ne,ie=(n("ae58"),Object(f["a"])(ae,a,i,!1,null,"d6216470",null));t["default"]=ie.exports},a40c:function(e,t,n){},a6a9:function(e,t,n){"use strict";var a=n("38e0"),i=n("33e4").find,l=n("6466"),o=n("effa"),r="find",s=!0,c=o(r);r in[]&&Array(1)[r]((function(){s=!1})),a({target:"Array",proto:!0,forced:s||!c},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),l(r)},ae58:function(e,t,n){"use strict";n("7656")},b161:function(e,t,n){"use strict";n.r(t);var a=n("0768"),i=n("bcba"),l=n.n(i),o=l.a.cloneDeep(a["$original_meta"]),r=l.a.cloneDeep(a["$original_content"]);r.$formItems=["title","slug","type","domains","scan_urls","list_url_regexes","content_url_regexes","fields","expand"];var s=l.a.cloneDeep(a["$original_comment"]),c=l.a.cloneDeep(a["$original_field"]),u=l.a.cloneDeep(a["$original_link"]);t["default"]={label:"爬虫",value:"spider",description:"",visible:!0,disabled:!1,original_meta:o,original_content:r,original_comment:s,original_field:c,original_link:u}},e1ec:function(e,t,n){"use strict";n("3a38")},f7cd:function(e,t,n){var a={"./_original.js":"0768","./article.js":"4f5a1","./icon.js":"054d","./news.js":"0640","./question.js":"85d5","./quote.js":"5461","./spider.js":"b161","./webstack.js":"89fa"};function i(e){var t=l(e);return n(t)}function l(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=l,e.exports=i,i.id="f7cd"}}]);